<!DOCTYPE html>
<html lang="id">
   <head>
      <meta charset="utf-8" />
      <title>ARcade AR Viewer</title>

      <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.2/aframe/build/aframe-ar.min.js"></script>

      <style>
         body {
            margin: 0;
            overflow: hidden;
         }
      </style>
   </head>

   <body>
      <a-scene embedded arjs="trackingMethod: best; sourceType: webcam; facingMode: environment; debugUIEnabled: false;">
         <a-marker id="dynamicMarker" emitevents="true"></a-marker>
         <a-entity camera position="0 1 3" rotation="-10 0 0"></a-entity>
      </a-scene>

      <script>
         const params = new URLSearchParams(window.location.search);
         const modelUrl = params.get("model") || "Earth-1.glb";
         const markerUrl = params.get("marker");

         const marker = document.getElementById("dynamicMarker");

         if (markerUrl) {
            marker.setAttribute("type", "pattern");
            marker.setAttribute("url", markerUrl);
         } else {
            marker.setAttribute("preset", "hiro");
         }

         const model = document.createElement("a-entity");
         model.setAttribute("gltf-model", modelUrl);
         model.setAttribute("scale", "2 2 2");
         model.setAttribute("position", "0 0 0");
         model.setAttribute("animation", "property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear");

         marker.appendChild(model);
      </script>
   </body>
</html>