<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Pencahayaan -->
      <a-entity light="type: ambient; intensity: 0.8;"></a-entity>
      <a-entity light="type: directional; intensity: 0.6; position: 1 1 1;"></a-entity>

      <!-- Kontainer model -->
      <a-entity id="model-container" position="0 1.5 -3">
        <a-gltf-model
          id="model"
          src="/model/Volcano.glb"
          animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
        </a-gltf-model>
      </a-entity>

      <a-sky color="#ECECEC"></a-sky>
    </a-scene>

    <script>
      const model = document.querySelector("#model");
      const container = document.querySelector("#model-container");

      model.addEventListener("model-loaded", (e) => {
        const object3D = e.detail.model;
        const box = new THREE.Box3().setFromObject(object3D);
        const size = new THREE.Vector3();
        const center = new THREE.Vector3();
        box.getSize(size);
        box.getCenter(center);

        // --- Hitung skala dinamis ---
        const maxDim = Math.max(size.x, size.y, size.z);
        const scaleFactor = 2 / maxDim; // ubah nilai 2 jika ingin lebih besar/kecil
        model.setAttribute("scale", `${scaleFactor} ${scaleFactor} ${scaleFactor}`);

        // --- Geser model agar benar-benar di tengah (karena center bawaan .glb bisa offset) ---
        object3D.position.sub(center.multiplyScalar(scaleFactor));

        console.log("Scale factor:", scaleFactor);
      });
    </script>
  </body>
</html>
